<div class="auction-page">
  <!-- 🔹 Layout principal con sidebar -->
  <div class="content-layout">
    
    <!-- 🔹 Sidebar de categorías -->
    <div class="sidebar">
      <button (click)="filterByCategory('armas')">⚔️ Armas</button>
      <button (click)="filterByCategory('items')">🎒 Ítems</button>
      <button (click)="filterByCategory('armaduras')">🛡️ Armaduras</button>
      <button (click)="filterByCategory('epicas')">🌟 Épicas</button>
      <button (click)="filterByCategory('heroes')">🦸 Héroes</button>
    </div>

    <!-- 🔹 Contenido principal -->
    <div class="main-content">
      <!-- Barra superior -->
      <div class="toolbar">
        <button (click)="goToComprar()">🛒 Comprar</button>
        <button (click)="goToVender()">📦 Vender</button>
        <button (click)="goToRecoger()">🎁 Recoger</button>
        <button (click)="goToMisPujas()">💰 Mis pujas</button>
      </div>

      <!-- Filtros -->
      <div class="filters">
        <input
          type="text"
          placeholder="Buscar por nombre (mín. 4 caracteres)..."
          [(ngModel)]="filter"
          (ngModelChange)="applyFilter()"
        />

        <select [(ngModel)]="selectedType" (ngModelChange)="applyFilter()">
          <option value="">Todos los tipos</option>
          <option *ngFor="let t of uniqueTypes" [value]="t">{{ t }}</option>
        </select>

        <select [(ngModel)]="selectedDuration" (ngModelChange)="applyFilter()">
          <option value="">Todas las duraciones</option>
          <option value="24">24 horas</option>
          <option value="48">48 horas</option>
        </select>

        <input
          type="number"
          placeholder="Precio máximo"
          [(ngModel)]="maxPrice"
          (ngModelChange)="applyFilter()"
        />
      </div>

      <!-- Listado -->
      <div class="list">
        <app-auction-card
          *ngFor="let a of filtered"
          [auction]="a"
          (click)="openDetails(a)"
        ></app-auction-card>
      </div>

      <!-- Detalle -->
      <app-auction-details
        *ngIf="selected"
        [auction]="selected"
        [token]="token || ''"
        (onClose)="closeDetails()"
        (onBought)="handleBought($event)"
      ></app-auction-details>
    </div>
  </div>
</div>
